#!/bin/bash

BASE=$(cd "$(dirname "$0")/.."; pwd -P)
COMPILER_JAR="$BASE/lib/robovm-dist-compiler.jar"
echo COMPILER_JAR is now $COMPILER_JAR
if [ -f "$COMPILER_JAR" ]; then
    export ROBOVM_HOME="$BASE"
else
    if [ "x$ROBOVM_DEV_ROOT" != 'x' ]; then
        COMPILER_JAR=$(ls "$ROBOVM_DEV_ROOT"/../robovm-dist/compiler/target/robovm-dist-compiler*.jar | egrep -v 'javadoc|sources' 2> /dev/null)
    fi
fi
if [ ! -f "$COMPILER_JAR" ]; then
  echo "robovm-dist-compiler.jar not found"
#  exit 1
fi

echo COMPILER_JAR is now $COMPILER_JAR
COMPILER_JAR=/home/appsupport/Projects/robovm/robovm-dist/compiler/target/robovm-dist-compiler-1.0.1-SNAPSHOT.jar
echo COMPILER_JAR is now $COMPILER_JAR

[ "x$JVM_MX" == 'x' ] && JVM_MX="2g"
echo java -XX:+HeapDumpOnOutOfMemoryError -Xss1024k -Xmx$JVM_MX $JVM_OPTS -jar "$COMPILER_JAR" "$@"
java -XX:+HeapDumpOnOutOfMemoryError -Xss1024k -Xmx$JVM_MX $JVM_OPTS -jar "$COMPILER_JAR" "$@"
